<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="filename" content="MarginNote_Literature_Manager.html">
  <title>MarginNote æ–‡çŒ®ç®¡ç†ç³»ç»Ÿ</title>
  <style>
    :root {
      --bg: #f7f8fb;
      --card-bg: #fff;
      --accent: #2b7cff;
      --muted: #666;
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
      --topbar-height: 64px;
      --tabs-height: 52px;
      --filter-height: 0px;

      /* æ–‡çŒ®ç±»å‹é¢œè‰² */
      --article-color: #5569ff;
      --conference-color: #ff9d4d;
      --book-color: #a36bff;
      --thesis-color: #5bd0a9;
      --other-color: #b7c2d0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: var(--bg);
      color: #111;
      -webkit-font-smoothing: antialiased;
      touch-action: manipulation;
      overscroll-behavior: contain;
    }

    /* ========== å›ºå®šé¡¶æ  ========== */
    .topbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 130;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(250, 250, 250, 0.9));
      border-bottom: 1px solid #e6e9ef;
      padding: 14px 20px;
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      min-height: var(--topbar-height);
      transition: transform 0.3s ease;
    }

    .topbar-main {
      flex: 1 1 640px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      min-width: 0;
    }

    .topbar-actions {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .search-input-wrap {
      display: flex;
      gap: 8px;
      align-items: center;
      flex: 1;
      min-width: 240px;
    }

    .search-input {
      flex: 1;
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid #d6dbe8;
      background: var(--card-bg);
      box-shadow: var(--shadow);
      font-size: 15px;
      outline: none;
      transition: all 0.2s ease;
    }

    .search-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(43, 124, 255, 0.1);
    }

    .search-count {
      color: var(--muted);
      font-size: 13px;
      white-space: nowrap;
    }

    .btn {
      background: var(--card-bg);
      border: 1px solid #e3e6ee;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .btn:hover {
      background: #f7f9fc;
      border-color: var(--accent);
    }

    .btn:active {
      transform: scale(0.97);
    }

    .btn.primary {
      background: var(--accent);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 4px 12px rgba(43, 124, 255, 0.2);
    }

    .btn.primary:hover {
      background: #1b6cef;
    }

    .btn.ghost {
      background: transparent;
      border-color: transparent;
      color: #4d5e78;
      box-shadow: none;
    }

    .btn.ghost:hover {
      background: rgba(43, 124, 255, 0.08);
      border-color: rgba(43, 124, 255, 0.12);
      color: #2b7cff;
    }

    /* ========== ç­›é€‰é¢æ¿ ========== */
    .filters-panel {
      position: fixed;
      top: var(--topbar-height);
      left: 0;
      right: 0;
      z-index: 80;
      background: rgba(247, 248, 251, 0.95);
      backdrop-filter: blur(4px);
      padding: 12px 20px;
      border-bottom: 1px solid #e6e9ef;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
    }

    .filters-panel.show {
      max-height: 500px;
      padding: 16px 20px;
    }

    .filter-section {
      margin-bottom: 14px;
    }

    .filter-section:last-child {
      margin-bottom: 0;
    }

    .filter-label {
      font-size: 12px;
      font-weight: 600;
      color: #5b6a80;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .filter-label::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      opacity: 0.45;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .pill {
      background: #eef5ff;
      color: #2f4a8a;
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      user-select: none;
      white-space: nowrap;
    }

    .pill:hover {
      background: #e0efff;
      transform: translateY(-1px);
    }

    .pill.active {
      background: var(--accent);
      color: #fff;
      border-color: rgba(43, 124, 255, 0.6);
      box-shadow: 0 4px 12px rgba(43, 124, 255, 0.18);
    }

    /* å¹´ä»½èŒƒå›´æ»‘å— */
    .year-range-slider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 8px;
    }

    .year-range-slider input[type="range"] {
      flex: 1;
      height: 6px;
      background: #d6dbe8;
      border-radius: 3px;
      outline: none;
      -webkit-appearance: none;
    }

    .year-range-slider input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      background: var(--accent);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(43, 124, 255, 0.3);
    }

    .year-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
      min-width: 40px;
      text-align: center;
    }

    /* ========== ä¸»å†…å®¹åŒº ========== */
    .main-layout {
      padding-top: calc(var(--topbar-height) + var(--tabs-height));
      height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .main-layout.with-filters {
      padding-top: calc(var(--topbar-height) + var(--tabs-height) + var(--filter-height));
    }

    .container {
      padding: 16px 20px 80px;
      max-width: 1600px;
      margin: 0 auto;
    }

    /* ========== æ–‡çŒ®å¡ç‰‡ç½‘æ ¼ ========== */
    .literature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 16px;
      margin-top: 16px;
    }

    .literature-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 16px;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--other-color);
      cursor: pointer;
      transition: all 0.25s ease;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .literature-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    .literature-card.selected {
      border-left-width: 8px;
      box-shadow: 0 12px 28px rgba(43, 124, 255, 0.3), 0 0 0 3px rgba(43, 124, 255, 0.1);
      transform: translateY(-4px) scale(1.01);
      background: linear-gradient(135deg, rgba(43, 124, 255, 0.02), rgba(255, 255, 255, 1));
      animation: pulseSelection 0.5s ease-out;
    }

    @keyframes pulseSelection {
      0% {
        box-shadow: 0 12px 28px rgba(43, 124, 255, 0.3), 0 0 0 0 rgba(43, 124, 255, 0.3);
      }
      50% {
        box-shadow: 0 12px 28px rgba(43, 124, 255, 0.3), 0 0 0 8px rgba(43, 124, 255, 0);
      }
      100% {
        box-shadow: 0 12px 28px rgba(43, 124, 255, 0.3), 0 0 0 3px rgba(43, 124, 255, 0.1);
      }
    }

    .literature-card.expanded {
      grid-column: 1 / -1;
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      z-index: 100;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    /* å¡ç‰‡æ“ä½œå›¾æ ‡ - iPad å‹å¥½,å§‹ç»ˆå¯è§ */
    .card-actions {
      position: absolute;
      top: 12px;
      right: 12px;
      display: flex;
      gap: 8px;
      opacity: 1;  /* å§‹ç»ˆå¯è§ */
    }

    .action-icon {
      width: 40px;  /* åŠ å¤§è§¦æ‘¸åŒºåŸŸ */
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;  /* å›¾æ ‡ç¨å¤§ */
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .action-icon:active {
      transform: scale(0.9);  /* è§¦æ‘¸åé¦ˆ */
    }

    /* å¡ç‰‡å¤´éƒ¨ */
    .card-header {
      padding-right: 140px;  /* ä¸º3ä¸ªæŒ‰é’®ç•™å‡ºç©ºé—´ */
    }

    .card-type-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.4;
      color: #2c3e50;
      margin-bottom: 8px;
      word-break: break-word;
    }

    .card-authors {
      font-size: 13px;
      color: #5b6a80;
      margin-bottom: 4px;
    }

    .card-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 12px;
      color: var(--muted);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .meta-divider {
      width: 1px;
      height: 12px;
      background: #d6dbe8;
    }

    .card-keywords {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .keyword-tag {
      padding: 3px 10px;
      background: rgba(43, 124, 255, 0.08);
      color: var(--accent);
      border-radius: 12px;
      font-size: 12px;
    }

    /* å±•å¼€çš„è¯¦æƒ… */
    .card-details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .literature-card.expanded .card-details {
      max-height: 1000px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #e6e9ef;
    }

    .detail-section {
      margin-bottom: 12px;
    }

    .detail-label {
      font-size: 12px;
      font-weight: 600;
      color: #5b6a80;
      margin-bottom: 6px;
    }

    .detail-content {
      font-size: 14px;
      line-height: 1.6;
      color: #2c3e50;
    }

    .detail-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #e6e9ef;
    }

    /* ========== ç©ºçŠ¶æ€ ========== */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }

    .empty-state i {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.3;
    }

    .empty-state h3 {
      font-size: 18px;
      margin-bottom: 8px;
    }

    .empty-state p {
      font-size: 14px;
    }

    /* ========== åŠ è½½æ›´å¤š ========== */
    .load-more-container {
      text-align: center;
      padding: 24px 0;
      display: none;
    }

    .load-more-container.show {
      display: block;
    }

    /* ========== Toast æç¤º ========== */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(33, 33, 33, 0.88);
      color: #fff;
      padding: 10px 18px;
      border-radius: 999px;
      font-size: 13px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
      z-index: 200;
    }

    .toast.show {
      opacity: 1;
    }

    /* ========== èƒŒæ™¯æ¨¡ç³Šé®ç½© ========== */
    .backdrop-blur {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(247, 248, 251, 0.7);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 90;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .backdrop-blur.show {
      opacity: 1;
      pointer-events: auto;
    }

    /* ========== æ˜Ÿæ ‡åŠŸèƒ½æ ·å¼ ========== */
    .action-icon.pin-icon {
      color: #fbbf24;
    }

    .action-icon.pin-icon.pinned {
      color: #f59e0b;
      background: rgba(251, 191, 36, 0.15);
    }

    /* ========== Tabå¯¼èˆªæ  ========== */
    .view-tabs {
      position: fixed;
      top: var(--topbar-height);
      left: 0;
      right: 0;
      z-index: 120;
      background: #fff;
      border-bottom: 1px solid #e6e9ef;
      display: flex;
      padding: 0 20px;
      gap: 4px;
    }

    .tab {
      padding: 14px 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: #5b6a80;
      border-bottom: 3px solid transparent;
      transition: all 0.2s ease;
      user-select: none;
    }

    .tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    .tab.disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .tab:not(.disabled):active {
      transform: scale(0.95);
    }

    /* ========== å“åº”å¼ ========== */
    @media (max-width: 1024px) {
      .literature-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }

      .literature-card.expanded {
        grid-column: auto;
      }
    }

    @media (max-width: 768px) {
      .topbar {
        padding: 12px 14px;
      }

      .topbar-main {
        flex-direction: column;
        align-items: stretch;
        min-width: 100%;
        gap: 10px;
      }

      .literature-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .container {
        padding: 12px 14px 80px;
      }
    }

    /* ========== é«˜äº®æ ·å¼ ========== */
    mark.highlight {
      background: rgba(255, 230, 120, 0.9);
      color: #111;
      padding: 0 2px;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <!-- å›ºå®šé¡¶æ  -->
  <div class="topbar">
    <div class="topbar-main">
      <div class="search-input-wrap">
        <input id="searchInput" class="search-input" placeholder="æœç´¢æ–‡çŒ®ï¼šæ ‡é¢˜ã€ä½œè€…ã€å…³é”®è¯ã€å¹´ä»½..." autocomplete="off" />
        <div id="searchCount" class="search-count">0 ç¯‡æ–‡çŒ®</div>
      </div>
    </div>
    <div class="topbar-actions">
      <button id="toggleFiltersBtn" class="btn ghost" type="button">ç­›é€‰</button>
      <button id="refreshBtn" class="btn" type="button">ğŸ”„ åˆ·æ–°</button>
      <button id="clearBtn" class="btn" type="button">æ¸…ç©º</button>
    </div>
  </div>

  <!-- Tab å¯¼èˆªæ  -->
  <div class="view-tabs" id="viewTabs">
    <div class="tab active" data-view="all">ğŸ“š å…¨éƒ¨ (0)</div>
    <div class="tab" data-view="pinned">â­ æ˜Ÿæ ‡ (0)</div>
    <div class="tab disabled" data-view="author">ğŸ‘¤ ä½œè€…</div>
    <div class="tab disabled" data-view="journal">ğŸ“– æœŸåˆŠ</div>
  </div>

  <!-- ç­›é€‰é¢æ¿ -->
  <div class="filters-panel" id="filtersPanel">
    <!-- æ–‡çŒ®ç±»å‹ç­›é€‰ -->
    <div class="filter-section">
      <div class="filter-label">æ–‡çŒ®ç±»å‹</div>
      <div class="pill-row" id="typeFilters">
        <!-- åŠ¨æ€æ¸²æŸ“ -->
      </div>
    </div>

    <!-- å¹´ä»½èŒƒå›´ -->
    <div class="filter-section">
      <div class="filter-label">å¹´ä»½èŒƒå›´</div>
      <div class="year-range-slider">
        <span class="year-label" id="yearStartLabel">2000</span>
        <input type="range" id="yearStartRange" min="1990" max="2030" value="2000" />
        <span style="color: #999;">è‡³</span>
        <input type="range" id="yearEndRange" min="1990" max="2030" value="2030" />
        <span class="year-label" id="yearEndLabel">2030</span>
      </div>
    </div>

    <!-- æœŸåˆŠ/ä¼šè®®ç­›é€‰ -->
    <div class="filter-section">
      <div class="filter-label">æœŸåˆŠ/ä¼šè®®</div>
      <div class="pill-row" id="venueFilters">
        <!-- åŠ¨æ€æ¸²æŸ“ -->
      </div>
    </div>
  </div>

  <!-- ä¸»å†…å®¹åŒº -->
  <div class="main-layout" id="mainLayout">
    <div class="container">
      <div class="literature-grid" id="literatureGrid">
        <!-- åŠ¨æ€æ¸²æŸ“æ–‡çŒ®å¡ç‰‡ -->
      </div>

      <!-- åŠ è½½æ›´å¤š -->
      <div class="load-more-container" id="loadMoreContainer">
        <button class="btn primary" id="loadMoreBtn">åŠ è½½æ›´å¤š</button>
      </div>
    </div>
  </div>

  <!-- Toast æç¤º -->
  <div class="toast" id="toast"></div>

  <!-- èƒŒæ™¯æ¨¡ç³Šé®ç½© -->
  <div class="backdrop-blur" id="backdropBlur"></div>

  <script>
    // ==================== æ•°æ®æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç† ====================

    const state = {
      // å…¨éƒ¨æ–‡çŒ®æ•°æ®
      literatures: [],
      // ç­›é€‰åçš„æ–‡çŒ®
      filteredLiteratures: [],
      // æ˜¾ç¤ºçš„æ–‡çŒ®ï¼ˆåˆ†é¡µï¼‰
      displayedLiteratures: [],
      // å½“å‰é€‰ä¸­çš„æ–‡çŒ®ID
      selectedId: null,
      // æœç´¢å…³é”®è¯
      searchQuery: '',
      // ç­›é€‰å™¨çŠ¶æ€
      filters: {
        activeType: 'all',
        yearStart: 2000,
        yearEnd: 2030,
        activeVenue: 'all'
      },
      // åˆ†é¡µçŠ¶æ€
      pagination: {
        currentPage: 1,
        pageSize: 50,
        hasMore: false
      },
      // å¯ç”¨çš„æœŸåˆŠ/ä¼šè®®åˆ—è¡¨
      availableVenues: new Set(),
      // æ˜Ÿæ ‡æ–‡çŒ®IDé›†åˆ
      pinnedLiteratures: new Set(),
      // å½“å‰è§†å›¾: 'all' | 'pinned' | 'author' | 'journal'
      currentView: 'all'
    };

    // DOM å…ƒç´ å¼•ç”¨
    const dom = {
      searchInput: document.getElementById('searchInput'),
      searchCount: document.getElementById('searchCount'),
      toggleFiltersBtn: document.getElementById('toggleFiltersBtn'),
      refreshBtn: document.getElementById('refreshBtn'),
      clearBtn: document.getElementById('clearBtn'),
      viewTabs: document.getElementById('viewTabs'),
      filtersPanel: document.getElementById('filtersPanel'),
      mainLayout: document.getElementById('mainLayout'),
      typeFilters: document.getElementById('typeFilters'),
      yearStartRange: document.getElementById('yearStartRange'),
      yearEndRange: document.getElementById('yearEndRange'),
      yearStartLabel: document.getElementById('yearStartLabel'),
      yearEndLabel: document.getElementById('yearEndLabel'),
      venueFilters: document.getElementById('venueFilters'),
      literatureGrid: document.getElementById('literatureGrid'),
      loadMoreContainer: document.getElementById('loadMoreContainer'),
      loadMoreBtn: document.getElementById('loadMoreBtn'),
      toast: document.getElementById('toast'),
      backdropBlur: document.getElementById('backdropBlur')
    };

    // ==================== Bridge é€šä¿¡æ¥å£ ====================

    window.Bridge = {
      /**
       * åŠ è½½æ–‡çŒ®æ•°æ® (Native â†’ JS)
       * @param {Object} data - æ–‡çŒ®æ•°æ®å¯¹è±¡
       * @param {Array} data.literatures - æ–‡çŒ®æ•°ç»„
       */
      loadLiteratures: function(data) {
        console.log('Bridge.loadLiteratures è¢«è°ƒç”¨', data);

        if (data && Array.isArray(data.literatures)) {
          state.literatures = data.literatures;
          extractVenues();
          applyFilters();
          renderFilters();
          showToast(`å·²åŠ è½½ ${data.literatures.length} ç¯‡æ–‡çŒ®`);
        }
      },

      /**
       * åˆ·æ–°æ•°æ® (JS â†’ Native)
       */
      refreshData: function() {
        console.log('Bridge.refreshData è¢«è°ƒç”¨');
        postBridge('refreshLiteratures');
      },

      /**
       * é€šçŸ¥å°±ç»ª (JS â†’ Native)
       */
      notifyReady: function() {
        console.log('Bridge.notifyReady è¢«è°ƒç”¨');
        postBridge('htmlReady');
      }
    };

    // ==================== å·¥å…·å‡½æ•° ====================

    /**
     * å‘ Native å‘é€æ¶ˆæ¯
     */
    function postBridge(action, params = {}) {
      try {
        const url = `mnliterature://${action}?${buildQueryString(params)}`;
        window.location.href = url;
        return true;
      } catch (error) {
        console.warn('postBridge å¤±è´¥', error);
        return false;
      }
    }

    /**
     * æ„å»ºæŸ¥è¯¢å­—ç¬¦ä¸²
     */
    function buildQueryString(params) {
      return Object.keys(params)
        .map(key => {
          const value = typeof params[key] === 'object'
            ? JSON.stringify(params[key])
            : params[key];
          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
        })
        .join('&');
    }

    /**
     * æ˜¾ç¤º Toast æç¤º
     */
    function showToast(message, duration = 1600) {
      dom.toast.textContent = message;
      dom.toast.classList.add('show');

      clearTimeout(showToast.timer);
      showToast.timer = setTimeout(() => {
        dom.toast.classList.remove('show');
      }, duration);
    }

    /**
     * é˜²æŠ–å‡½æ•°
     */
    function debounce(fn, wait) {
      let timer = null;
      return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => fn.apply(this, args), wait);
      };
    }

    /**
     * HTML è½¬ä¹‰
     */
    function escapeHtml(text) {
      if (!text) return '';
      return text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }

    /**
     * é«˜äº®å…³é”®è¯
     */
    function highlightText(text, query) {
      if (!text || !query) return escapeHtml(text);

      const keywords = query.trim().split(/\s+/);
      let result = escapeHtml(text);

      keywords.forEach(keyword => {
        if (!keyword) return;
        const regex = new RegExp(`(${escapeRegExp(keyword)})`, 'gi');
        result = result.replace(regex, '<mark class="highlight">$1</mark>');
      });

      return result;
    }

    function escapeRegExp(string) {
      return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    /**
     * å¹³æ»‘æ»šåŠ¨åˆ°æŒ‡å®šå¡ç‰‡
     */
    function scrollToCard(cardElement) {
      if (!cardElement) return;

      // ä½¿ç”¨ scrollIntoView å®ç°å¹³æ»‘æ»šåŠ¨
      cardElement.scrollIntoView({
        behavior: 'smooth',
        block: 'center',
        inline: 'nearest'
      });
    }

    /**
     * æ˜¾ç¤ºèƒŒæ™¯æ¨¡ç³Š
     */
    function showBackdrop() {
      dom.backdropBlur.classList.add('show');
    }

    /**
     * éšè—èƒŒæ™¯æ¨¡ç³Š
     */
    function hideBackdrop() {
      dom.backdropBlur.classList.remove('show');
    }

    /**
     * è·å–æ–‡çŒ®ç±»å‹é¢œè‰²
     */
    function getTypeColor(type) {
      const colorMap = {
        'article': 'var(--article-color)',
        'inproceedings': 'var(--conference-color)',
        'book': 'var(--book-color)',
        'phdthesis': 'var(--thesis-color)',
        'mastersthesis': 'var(--thesis-color)'
      };
      return colorMap[type] || 'var(--other-color)';
    }

    /**
     * è·å–æ–‡çŒ®ç±»å‹ä¸­æ–‡å
     */
    function getTypeName(type) {
      const nameMap = {
        'article': 'æœŸåˆŠè®ºæ–‡',
        'inproceedings': 'ä¼šè®®è®ºæ–‡',
        'book': 'ä¹¦ç±',
        'phdthesis': 'åšå£«è®ºæ–‡',
        'mastersthesis': 'ç¡•å£«è®ºæ–‡'
      };
      return nameMap[type] || 'å…¶ä»–';
    }

    // ==================== æ˜Ÿæ ‡åŠŸèƒ½ ====================

    /**
     * åˆ‡æ¢æ˜Ÿæ ‡çŠ¶æ€
     * @param {string} id - æ–‡çŒ®ID
     */
    function togglePin(id) {
      if (state.pinnedLiteratures.has(id)) {
        state.pinnedLiteratures.delete(id);
      } else {
        state.pinnedLiteratures.add(id);
      }
      savePinnedData();
      applyFilters();  // é‡æ–°æ’åº
    }

    /**
     * ä¿å­˜æ˜Ÿæ ‡æ•°æ®åˆ° localStorage
     */
    function savePinnedData() {
      const pinnedIds = Array.from(state.pinnedLiteratures);
      localStorage.setItem('mnliterature_pinned', JSON.stringify(pinnedIds));
    }

    /**
     * ä» localStorage åŠ è½½æ˜Ÿæ ‡æ•°æ®
     */
    function loadPinnedData() {
      try {
        const saved = localStorage.getItem('mnliterature_pinned');
        if (saved) {
          const pinnedIds = JSON.parse(saved);
          state.pinnedLiteratures = new Set(pinnedIds);
        }
      } catch (error) {
        console.error('åŠ è½½æ˜Ÿæ ‡æ•°æ®å¤±è´¥:', error);
        state.pinnedLiteratures = new Set();
      }
    }

    /**
     * å¯¹æ–‡çŒ®åˆ—è¡¨æ’åº(æ˜Ÿæ ‡ä¼˜å…ˆ)
     * @param {Array} literatures - æ–‡çŒ®åˆ—è¡¨
     * @returns {Array} æ’åºåçš„æ–‡çŒ®åˆ—è¡¨
     */
    function sortLiteratures(literatures) {
      return literatures.sort((a, b) => {
        const aPin = state.pinnedLiteratures.has(a.id) ? 1 : 0;
        const bPin = state.pinnedLiteratures.has(b.id) ? 1 : 0;

        // æ˜Ÿæ ‡çš„æ’åœ¨å‰é¢
        if (aPin !== bPin) {
          return bPin - aPin;
        }

        // åŒç­‰çº§æŒ‰å¹´ä»½é™åº
        return b.year - a.year;
      });
    }

    // ==================== æ•°æ®å¤„ç† ====================

    /**
     * æå–æ‰€æœ‰æœŸåˆŠ/ä¼šè®®
     */
    function extractVenues() {
      state.availableVenues.clear();
      state.literatures.forEach(lit => {
        if (lit.journal) {
          state.availableVenues.add(lit.journal);
        }
      });
    }

    /**
     * åº”ç”¨ç­›é€‰å™¨
     */
    function applyFilters() {
      const { searchQuery, filters } = state;

      let results = state.literatures.filter(lit => {
        // ç±»å‹ç­›é€‰
        if (filters.activeType !== 'all' && lit.type !== filters.activeType) {
          return false;
        }

        // å¹´ä»½ç­›é€‰
        if (lit.year < filters.yearStart || lit.year > filters.yearEnd) {
          return false;
        }

        // æœŸåˆŠç­›é€‰
        if (filters.activeVenue !== 'all' && lit.journal !== filters.activeVenue) {
          return false;
        }

        // æœç´¢å…³é”®è¯
        if (searchQuery) {
          const searchText = [
            lit.title || '',
            (lit.authors || []).join(' '),
            (lit.keywords || []).join(' '),
            String(lit.year),
            lit.journal || ''
          ].join(' ').toLowerCase();

          const keywords = searchQuery.toLowerCase().split(/\s+/);
          return keywords.every(keyword => searchText.includes(keyword));
        }

        return true;
      });

      // æ’åºï¼šæ˜Ÿæ ‡ä¼˜å…ˆï¼ŒåŒçº§æŒ‰å¹´ä»½é™åº
      results = sortLiteratures(results);

      state.filteredLiteratures = results;
      state.pagination.currentPage = 1;
      state.pagination.hasMore = results.length > state.pagination.pageSize;

      updateDisplay();
    }

    /**
     * æ›´æ–°æ˜¾ç¤º
     */
    function updateDisplay() {
      const { currentPage, pageSize } = state.pagination;
      const startIndex = 0;
      const endIndex = currentPage * pageSize;

      state.displayedLiteratures = state.filteredLiteratures.slice(startIndex, endIndex);
      state.pagination.hasMore = endIndex < state.filteredLiteratures.length;

      renderTabs();
      renderLiteratures();
      updateSearchCount();
      updateLoadMoreButton();
    }

    /**
     * åŠ è½½æ›´å¤š
     */
    function loadMore() {
      state.pagination.currentPage++;
      updateDisplay();
    }

    // ==================== æ¸²æŸ“å‡½æ•° ====================

    /**
     * æ¸²æŸ“ç­›é€‰å™¨
     */
    function renderFilters() {
      // æ¸²æŸ“ç±»å‹ç­›é€‰
      const types = [
        { key: 'all', label: 'å…¨éƒ¨ç±»å‹' },
        { key: 'article', label: 'æœŸåˆŠè®ºæ–‡' },
        { key: 'inproceedings', label: 'ä¼šè®®è®ºæ–‡' },
        { key: 'book', label: 'ä¹¦ç±' },
        { key: 'phdthesis', label: 'åšå£«è®ºæ–‡' },
        { key: 'mastersthesis', label: 'ç¡•å£«è®ºæ–‡' }
      ];

      dom.typeFilters.innerHTML = types.map(type => `
        <div class="pill ${state.filters.activeType === type.key ? 'active' : ''}"
             data-type="${type.key}">
          ${type.label}
        </div>
      `).join('');

      // æ¸²æŸ“æœŸåˆŠç­›é€‰
      const venues = ['all', ...Array.from(state.availableVenues)];
      dom.venueFilters.innerHTML = venues.map(venue => `
        <div class="pill ${state.filters.activeVenue === venue ? 'active' : ''}"
             data-venue="${venue}">
          ${venue === 'all' ? 'å…¨éƒ¨æœŸåˆŠ' : venue}
        </div>
      `).join('');
    }

    /**
     * æ¸²æŸ“Tabå¯¼èˆª
     */
    function renderTabs() {
      const pinnedCount = state.pinnedLiteratures.size;
      const allCount = state.filteredLiteratures.length;

      const tabsHtml = `
        <div class="tab ${state.currentView === 'all' ? 'active' : ''}" data-view="all">
          ğŸ“š å…¨éƒ¨ (${allCount})
        </div>
        <div class="tab ${state.currentView === 'pinned' ? 'active' : ''}" data-view="pinned">
          â­ æ˜Ÿæ ‡ (${pinnedCount})
        </div>
        <div class="tab disabled" data-view="author">
          ğŸ‘¤ ä½œè€…
        </div>
        <div class="tab disabled" data-view="journal">
          ğŸ“– æœŸåˆŠ
        </div>
      `;

      dom.viewTabs.innerHTML = tabsHtml;
    }

    /**
     * åˆ‡æ¢è§†å›¾
     */
    function switchView(viewKey) {
      state.currentView = viewKey;
      renderTabs();
      renderLiteratures();
    }

    /**
     * æ¸²æŸ“æ–‡çŒ®åˆ—è¡¨(åŸºäºå½“å‰è§†å›¾)
     */
    function renderLiteratures() {
      // æ ¹æ®å½“å‰è§†å›¾è¿‡æ»¤æ•°æ®
      let displayData = [];

      switch (state.currentView) {
        case 'pinned':
          displayData = state.displayedLiteratures.filter(lit =>
            state.pinnedLiteratures.has(lit.id)
          );
          break;
        case 'all':
        default:
          displayData = state.displayedLiteratures;
          break;
      }

      // ç©ºçŠ¶æ€
      if (displayData.length === 0) {
        const emptyMessage = state.currentView === 'pinned'
          ? 'è¿˜æ²¡æœ‰æ˜Ÿæ ‡æ–‡çŒ®<br>ç‚¹å‡»å¡ç‰‡ä¸Šçš„ â˜† æ·»åŠ æ˜Ÿæ ‡'
          : 'æœªæ‰¾åˆ°æ–‡çŒ®<br>å°è¯•è°ƒæ•´æœç´¢å…³é”®è¯æˆ–ç­›é€‰æ¡ä»¶';

        dom.literatureGrid.innerHTML = `
          <div class="empty-state">
            <div style="font-size: 48px; margin-bottom: 16px;">
              ${state.currentView === 'pinned' ? 'â­' : 'ğŸ“š'}
            </div>
            <h3>${emptyMessage.split('<br>')[0]}</h3>
            <p>${emptyMessage.split('<br>')[1]}</p>
          </div>
        `;
        return;
      }

      // æ¸²æŸ“å¡ç‰‡
      dom.literatureGrid.innerHTML = displayData
        .map(lit => renderLiteratureCard(lit))
        .join('');
    }

    /**
     * æ¸²æŸ“å•ä¸ªæ–‡çŒ®å¡ç‰‡
     */
    function renderLiteratureCard(lit) {
      const isSelected = state.selectedId === lit.id;
      const isExpanded = isSelected && state.expandedId === lit.id;
      const isPinned = state.pinnedLiteratures.has(lit.id);
      const typeColor = getTypeColor(lit.type);
      const typeName = getTypeName(lit.type);

      // ä½œè€…æ˜¾ç¤ºï¼ˆæœ€å¤š3ä¸ªï¼Œå…¶ä½™æ˜¾ç¤º et al.ï¼‰
      const authorsDisplay = Array.isArray(lit.authors)
        ? (lit.authors.length <= 3
            ? lit.authors.join(', ')
            : `${lit.authors.slice(0, 3).join(', ')} et al.`)
        : '';

      return `
        <div class="literature-card ${isSelected ? 'selected' : ''} ${isExpanded ? 'expanded' : ''}"
             data-id="${lit.id}"
             style="border-left-color: ${typeColor}">

          <!-- æ“ä½œå›¾æ ‡ -->
          <div class="card-actions">
            <div class="action-icon pin-icon ${isPinned ? 'pinned' : ''}"
                 data-action="pin"
                 title="${isPinned ? 'å–æ¶ˆæ˜Ÿæ ‡' : 'æ·»åŠ æ˜Ÿæ ‡'}">
              ${isPinned ? 'â­' : 'â˜†'}
            </div>
            <div class="action-icon" data-action="focus" title="åœ¨ MarginNote ä¸­å®šä½">ğŸ“</div>
            <div class="action-icon" data-action="pdf" title="æ‰“å¼€ PDF">ğŸ“„</div>
          </div>

          <!-- å¡ç‰‡å¤´éƒ¨ -->
          <div class="card-header">
            <div class="card-type-badge" style="background: ${typeColor}">
              ${typeName}
            </div>
            <div class="card-title">${highlightText(lit.title, state.searchQuery)}</div>
            ${authorsDisplay ? `<div class="card-authors">${highlightText(authorsDisplay, state.searchQuery)}</div>` : ''}

            <div class="card-meta">
              <span class="meta-item">${lit.year}</span>
              ${lit.journal ? `
                <span class="meta-divider"></span>
                <span class="meta-item">${lit.journal}</span>
              ` : ''}
              ${lit.citations ? `
                <span class="meta-divider"></span>
                <span class="meta-item">å¼•ç”¨: ${lit.citations}</span>
              ` : ''}
            </div>
          </div>

          <!-- å…³é”®è¯ -->
          ${lit.keywords && lit.keywords.length > 0 ? `
            <div class="card-keywords">
              ${lit.keywords.slice(0, 5).map(kw => `
                <span class="keyword-tag">${kw}</span>
              `).join('')}
            </div>
          ` : ''}

          <!-- å±•å¼€çš„è¯¦æƒ… -->
          <div class="card-details">
            ${lit.abstract ? `
              <div class="detail-section">
                <div class="detail-label">æ‘˜è¦</div>
                <div class="detail-content">${escapeHtml(lit.abstract)}</div>
              </div>
            ` : ''}

            ${lit.doi ? `
              <div class="detail-section">
                <div class="detail-label">DOI</div>
                <div class="detail-content">${lit.doi}</div>
              </div>
            ` : ''}

            <div class="detail-actions">
              <button class="btn" onclick="handleAction('focus', '${lit.id}')">åœ¨ MarginNote ä¸­æŸ¥çœ‹</button>
              <button class="btn" onclick="handleAction('bibtex', '${lit.id}')">å¯¼å‡º BibTeX</button>
            </div>
          </div>
        </div>
      `;
    }

    /**
     * æ›´æ–°æœç´¢è®¡æ•°
     */
    function updateSearchCount() {
      const count = state.filteredLiteratures.length;
      dom.searchCount.textContent = `${count} ç¯‡æ–‡çŒ®`;
    }

    /**
     * æ›´æ–°åŠ è½½æ›´å¤šæŒ‰é’®
     */
    function updateLoadMoreButton() {
      if (state.pagination.hasMore) {
        dom.loadMoreContainer.classList.add('show');
        const remaining = state.filteredLiteratures.length - state.displayedLiteratures.length;
        dom.loadMoreBtn.textContent = `åŠ è½½æ›´å¤š (å‰©ä½™ ${remaining} ç¯‡)`;
      } else {
        dom.loadMoreContainer.classList.remove('show');
      }
    }

    // ==================== äº‹ä»¶å¤„ç† ====================

    /**
     * å¤„ç†å¡ç‰‡ç‚¹å‡»
     */
    function handleCardClick(event) {
      const card = event.target.closest('.literature-card');
      if (!card) return;

      // å¦‚æœç‚¹å‡»çš„æ˜¯æ“ä½œå›¾æ ‡ï¼Œä¸å¤„ç†å¡ç‰‡ç‚¹å‡»
      if (event.target.closest('.action-icon') || event.target.closest('.btn')) {
        return;
      }

      const id = card.dataset.id;

      if (state.selectedId === id) {
        // ç¬¬äºŒæ¬¡ç‚¹å‡»ï¼šå±•å¼€/æ”¶èµ·è¯¦æƒ…
        if (state.expandedId === id) {
          // æ”¶èµ·è¯¦æƒ…
          state.expandedId = null;
          hideBackdrop();
        } else {
          // å±•å¼€è¯¦æƒ…
          state.expandedId = id;
          renderLiteratures();

          // å»¶è¿Ÿæ‰§è¡Œæ»šåŠ¨å’Œæ˜¾ç¤ºèƒŒæ™¯ï¼Œç­‰å¾… DOM æ›´æ–°
          setTimeout(() => {
            const expandedCard = document.querySelector('.literature-card.expanded');
            if (expandedCard) {
              scrollToCard(expandedCard);
              showBackdrop();
            }
          }, 50);
          return;
        }
      } else {
        // ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼šé€‰ä¸­å¡ç‰‡
        state.selectedId = id;
        state.expandedId = null;
        hideBackdrop();
      }

      renderLiteratures();
    }

    /**
     * å¤„ç†æ“ä½œæŒ‰é’®ç‚¹å‡»
     */
    function handleAction(action, id) {
      const lit = state.literatures.find(l => l.id === id);
      if (!lit) return;

      switch (action) {
        case 'pin':
          togglePin(id);
          showToast(state.pinnedLiteratures.has(id) ? 'âœ… å·²æ·»åŠ æ˜Ÿæ ‡' : 'å·²å–æ¶ˆæ˜Ÿæ ‡');
          break;
        case 'focus':
          postBridge('focusInMindMap', { id });
          showToast('æ­£åœ¨å®šä½åˆ° MarginNote...');
          break;
        case 'pdf':
          postBridge('openPDF', { id });
          showToast('æ­£åœ¨æ‰“å¼€ PDF...');
          break;
        case 'bibtex':
          postBridge('exportBibTeX', { id });
          showToast('å·²å¤åˆ¶ BibTeX');
          break;
      }
    }

    /**
     * å¤„ç†æœç´¢è¾“å…¥
     */
    const handleSearchInput = debounce(function() {
      state.searchQuery = dom.searchInput.value.trim();
      applyFilters();
    }, 300);

    /**
     * å¤„ç†ç­›é€‰å™¨åˆ‡æ¢
     */
    function handleFilterToggle() {
      const isShowing = dom.filtersPanel.classList.contains('show');

      if (isShowing) {
        dom.filtersPanel.classList.remove('show');
        dom.mainLayout.classList.remove('with-filters');
        dom.toggleFiltersBtn.textContent = 'ç­›é€‰';
      } else {
        dom.filtersPanel.classList.add('show');
        dom.mainLayout.classList.add('with-filters');
        dom.toggleFiltersBtn.textContent = 'æ”¶èµ·ç­›é€‰';
      }
    }

    /**
     * å¤„ç†æ¸…ç©ºæ“ä½œ
     */
    function handleClear() {
      dom.searchInput.value = '';
      state.searchQuery = '';
      state.filters.activeType = 'all';
      state.filters.yearStart = 2000;
      state.filters.yearEnd = 2030;
      state.filters.activeVenue = 'all';
      state.selectedId = null;
      state.expandedId = null;

      dom.yearStartRange.value = 2000;
      dom.yearEndRange.value = 2030;
      dom.yearStartLabel.textContent = '2000';
      dom.yearEndLabel.textContent = '2030';

      hideBackdrop();
      applyFilters();
      renderFilters();
      showToast('å·²æ¸…ç©ºç­›é€‰æ¡ä»¶');
    }

    // ==================== åˆå§‹åŒ– ====================

    function init() {
      // åŠ è½½æ˜Ÿæ ‡æ•°æ®
      loadPinnedData();

      // äº‹ä»¶ç›‘å¬
      dom.searchInput.addEventListener('input', handleSearchInput);
      dom.toggleFiltersBtn.addEventListener('click', handleFilterToggle);
      dom.clearBtn.addEventListener('click', handleClear);
      dom.refreshBtn.addEventListener('click', () => Bridge.refreshData());
      dom.loadMoreBtn.addEventListener('click', loadMore);
      dom.literatureGrid.addEventListener('click', handleCardClick);

      // Tab åˆ‡æ¢
      dom.viewTabs.addEventListener('click', (e) => {
        const tab = e.target.closest('.tab');
        if (!tab || tab.classList.contains('disabled')) return;

        const viewKey = tab.dataset.view;
        switchView(viewKey);
      });

      // ç±»å‹ç­›é€‰
      dom.typeFilters.addEventListener('click', (e) => {
        const pill = e.target.closest('.pill');
        if (!pill) return;

        state.filters.activeType = pill.dataset.type;
        applyFilters();
        renderFilters();
      });

      // æœŸåˆŠç­›é€‰
      dom.venueFilters.addEventListener('click', (e) => {
        const pill = e.target.closest('.pill');
        if (!pill) return;

        state.filters.activeVenue = pill.dataset.venue;
        applyFilters();
        renderFilters();
      });

      // å¹´ä»½èŒƒå›´
      dom.yearStartRange.addEventListener('input', (e) => {
        const value = parseInt(e.target.value);
        state.filters.yearStart = value;
        dom.yearStartLabel.textContent = value;

        // ç¡®ä¿èµ·å§‹å¹´ä»½ä¸å¤§äºç»“æŸå¹´ä»½
        if (value > state.filters.yearEnd) {
          state.filters.yearEnd = value;
          dom.yearEndRange.value = value;
          dom.yearEndLabel.textContent = value;
        }

        applyFilters();
      });

      dom.yearEndRange.addEventListener('input', (e) => {
        const value = parseInt(e.target.value);
        state.filters.yearEnd = value;
        dom.yearEndLabel.textContent = value;

        // ç¡®ä¿ç»“æŸå¹´ä»½ä¸å°äºèµ·å§‹å¹´ä»½
        if (value < state.filters.yearStart) {
          state.filters.yearStart = value;
          dom.yearStartRange.value = value;
          dom.yearStartLabel.textContent = value;
        }

        applyFilters();
      });

      // æ“ä½œå›¾æ ‡ç‚¹å‡»
      dom.literatureGrid.addEventListener('click', (e) => {
        const icon = e.target.closest('.action-icon');
        if (!icon) return;

        e.stopPropagation();
        const card = icon.closest('.literature-card');
        const id = card.dataset.id;
        const action = icon.dataset.action;

        handleAction(action, id);
      });

      // ç‚¹å‡»èƒŒæ™¯é®ç½©å…³é—­è¯¦æƒ…
      dom.backdropBlur.addEventListener('click', () => {
        if (state.expandedId) {
          state.expandedId = null;
          hideBackdrop();
          renderLiteratures();
        }
      });

      // ESC é”®å…³é—­è¯¦æƒ…
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && state.expandedId) {
          state.expandedId = null;
          hideBackdrop();
          renderLiteratures();
        }
      });

      // åŠ è½½ç¤ºä¾‹æ•°æ®ï¼ˆç”¨äºæµ‹è¯•ï¼‰
      loadSampleData();

      // é€šçŸ¥ Native å‡†å¤‡å°±ç»ª
      Bridge.notifyReady();
    }

    /**
     * åŠ è½½ç¤ºä¾‹æ•°æ®ï¼ˆæµ‹è¯•ç”¨ï¼‰
     */
    function loadSampleData() {
      const sampleData = [
        {
          id: 'zhang2023transformer',
          title: 'Transformer æ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„çªç ´æ€§è¿›å±•',
          authors: ['å¼ ä¼Ÿ', 'ææ˜', 'Anna Wilson'],
          year: 2023,
          type: 'article',
          journal: 'äººå·¥æ™ºèƒ½å­¦æŠ¥',
          keywords: ['è‡ªç„¶è¯­è¨€å¤„ç†', 'Transformer', 'æ³¨æ„åŠ›æœºåˆ¶', 'æ·±åº¦å­¦ä¹ '],
          abstract: 'æœ¬æ–‡æ·±å…¥åˆ†æäº†Transformeræ¶æ„åœ¨è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„é©å‘½æ€§å½±å“ã€‚é€šè¿‡å¯¹å¤šä¸ªå¤§è§„æ¨¡NLPä»»åŠ¡çš„å®éªŒè¯„ä¼°ï¼Œæˆ‘ä»¬è¯æ˜äº†Transformeræ¨¡å‹åœ¨å¤„ç†é•¿åºåˆ—å’Œè¯­ä¹‰ç†è§£æ–¹é¢çš„æ˜¾è‘—ä¼˜åŠ¿ã€‚',
          doi: '10.1000/ai.2023.001',
          citations: 128,
          pdfLink: 'marginnote://note/xxx'
        },
        {
          id: 'wang2022federated',
          title: 'è”é‚¦å­¦ä¹ åœ¨åŒ»ç–—å›¾åƒåˆ†æä¸­çš„éšç§ä¿æŠ¤åº”ç”¨',
          authors: ['ç‹èŠ³', 'Robert Davis', 'åˆ˜å¼º'],
          year: 2022,
          type: 'inproceedings',
          journal: 'å›½é™…åŒ»å­¦å½±åƒä¼šè®®',
          keywords: ['è”é‚¦å­¦ä¹ ', 'åŒ»ç–—å›¾åƒ', 'éšç§ä¿æŠ¤', 'æ·±åº¦å­¦ä¹ '],
          abstract: 'é’ˆå¯¹åŒ»ç–—æ•°æ®éšç§ä¿æŠ¤éœ€æ±‚ï¼Œæœ¬ç ”ç©¶æå‡ºäº†ä¸€ç§åŸºäºè”é‚¦å­¦ä¹ çš„åŒ»å­¦å›¾åƒåˆ†ææ¡†æ¶ã€‚è¯¥æ–¹æ¡ˆåœ¨ä¿æŒæ•°æ®æœ¬åœ°åŒ–çš„åŸºç¡€ä¸Šå®ç°äº†åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒã€‚',
          citations: 89
        },
        {
          id: 'chen2021reinforcement',
          title: 'åŸºäºæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„è‡ªåŠ¨é©¾é©¶å†³ç­–ç³»ç»Ÿ',
          authors: ['é™ˆæ˜', 'Steven Chen', 'èµµæ•'],
          year: 2021,
          type: 'article',
          journal: 'IEEE æ™ºèƒ½äº¤é€šç³»ç»Ÿ',
          keywords: ['è‡ªåŠ¨é©¾é©¶', 'å¼ºåŒ–å­¦ä¹ ', 'å†³ç­–ç³»ç»Ÿ', 'äººå·¥æ™ºèƒ½'],
          abstract: 'æœ¬æ–‡æå‡ºäº†ä¸€ç§ç»“åˆæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„è‡ªåŠ¨é©¾é©¶å†³ç­–æ¡†æ¶ã€‚é€šè¿‡è®¾è®¡æ–°å‹å¥–åŠ±å‡½æ•°å’ŒçŠ¶æ€è¡¨ç¤ºæ–¹æ³•ï¼Œç³»ç»Ÿåœ¨å¤æ‚äº¤é€šåœºæ™¯ä¸­è¡¨ç°å‡ºä¼˜å¼‚çš„å†³ç­–èƒ½åŠ›ã€‚',
          doi: '10.1109/TITS.2021.xxx',
          citations: 145
        },
        {
          id: 'liu2020knowledge',
          title: 'çŸ¥è¯†å›¾è°±æ„å»ºä¸­çš„å®ä½“å¯¹é½æŠ€æœ¯ç ”ç©¶',
          authors: ['åˆ˜å»ºå', 'ç‹ä¼Ÿ', 'å¼ æ˜'],
          year: 2020,
          type: 'article',
          journal: 'è®¡ç®—æœºç ”ç©¶ä¸å‘å±•',
          keywords: ['çŸ¥è¯†å›¾è°±', 'å®ä½“å¯¹é½', 'å›¾ç¥ç»ç½‘ç»œ', 'è‡ªç„¶è¯­è¨€å¤„ç†'],
          abstract: 'æœ¬ç ”ç©¶ç³»ç»Ÿæ¢è®¨äº†å¤§è§„æ¨¡çŸ¥è¯†å›¾è°±æ„å»ºä¸­çš„å®ä½“å¯¹é½å…³é”®æŠ€æœ¯ã€‚æå‡ºäº†ä¸€ç§åŸºäºå›¾ç¥ç»ç½‘ç»œå’Œé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„è”åˆå­¦ä¹ æ–¹æ³•ã€‚',
          citations: 76
        },
        {
          id: 'huang2023compression',
          title: 'ç¥ç»ç½‘ç»œæ¨¡å‹å‹ç¼©ä¸åŠ é€ŸæŠ€æœ¯ç»¼è¿°',
          authors: ['Steven Chen', 'é»„ä¼Ÿ', 'Anna Wilson'],
          year: 2023,
          type: 'article',
          journal: 'IEEE æ¨¡å¼åˆ†æä¸æœºå™¨æ™ºèƒ½',
          keywords: ['æ¨¡å‹å‹ç¼©', 'ç¥ç»ç½‘ç»œ', 'æ¨¡å‹åŠ é€Ÿ', 'è¾¹ç¼˜è®¡ç®—'],
          abstract: 'æœ¬æ–‡å…¨é¢ç»¼è¿°äº†æ·±åº¦ç¥ç»ç½‘ç»œæ¨¡å‹å‹ç¼©ä¸åŠ é€Ÿçš„æœ€æ–°ç ”ç©¶è¿›å±•ã€‚ç³»ç»Ÿåˆ†æäº†å‰ªæã€é‡åŒ–ã€çŸ¥è¯†è’¸é¦å’Œè½»é‡åŒ–ç½‘ç»œè®¾è®¡ç­‰æŠ€æœ¯çš„åŸç†ä¸åº”ç”¨åœºæ™¯ã€‚',
          doi: '10.1109/TPAMI.2023.xxx',
          citations: 112
        }
      ];

      Bridge.loadLiteratures({ literatures: sampleData });
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

    // æš´éœ² handleAction åˆ°å…¨å±€ï¼ˆç”¨äºæŒ‰é’®ç‚¹å‡»ï¼‰
    window.handleAction = handleAction;
  </script>
</body>
</html>
